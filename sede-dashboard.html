<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NextIaDoctor • Dashboard Sede</title>
  <!-- Tailwind para prototipo -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50:'#eef2ff',100:'#e0e7ff',200:'#c7d2fe',300:'#a5b4fc',400:'#818cf8',
              500:'#6366f1',600:'#4f46e5',700:'#4338ca',800:'#3730a3',900:'#312e81'
            },
            accent: {
              50:'#ecfeff',100:'#cffafe',200:'#a5f3fc',300:'#67e8f9',400:'#22d3ee',
              500:'#06b6d4',600:'#0891b2',700:'#0e7490',800:'#155e75',900:'#164e63'
            }
          },
          boxShadow: { soft:'0 8px 24px rgba(2,6,23,.06)'},
          borderRadius: { xl2:'1.25rem'}
        }
      }
    }
  </script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <style>
    :root{ --radius: 16px; }
    *{ scrollbar-width: thin; scrollbar-color: #cbd5e1 transparent; }
    *::-webkit-scrollbar{height:8px;width:8px}
    *::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:8px}
    .chart-container{position:relative;height:220px;width:100%;overflow:hidden}
    .chart-container canvas{max-height:220px!important;max-width:100%!important}
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
  <!-- Topbar -->
  <header class="fixed inset-x-0 top-0 z-40 bg-gradient-to-r from-brand-600 to-accent-500 text-white shadow-soft">
    <div class="mx-auto flex h-16 max-w-screen-2xl items-center justify-between px-4">
      <div class="flex items-center gap-3">
        <a href="ipress-sedes.html" class="inline-flex items-center gap-3">
          <div class="select-none text-lg font-semibold tracking-wide">NextIaCorp</div>
        </a>
        <!-- Breadcrumb contextual -->
        <div class="hidden items-center gap-2 rounded-lg bg-white/15 px-3 py-1.5 md:flex">
          <span class="font-semibold">IPRESS San Martín</span>
		  <span class="hidden text-xs text-white/70 md:inline">›</span>
          <span class="hidden text-xs text-white/95 md:inline">Sede Miraflores</span>
        </div>
      </div>
      <nav class="flex items-center gap-2">
        <a href="#" class="hidden rounded-lg bg-white/10 px-3 py-1.5 text-sm font-medium backdrop-blur hover:bg-white/20 md:inline">Soporte</a>
        <img src="https://api.dicebear.com/7.x/initials/svg?seed=ND" alt="avatar" class="h-8 w-8 rounded-full ring-2 ring-white/30"/>
      </nav>
    </div>
  </header>

  <!-- NAV NIVEL 2 (de la Sede) -->
  <nav class="fixed top-16 inset-x-0 z-30 bg-white border-b border-slate-200 shadow-soft" aria-label="Navegación de Sede">
    <div class="mx-auto max-w-screen-2xl px-4">
      <div class="flex items-center justify-between">
		<!-- Tabs/menú de la IPRESS -->
        <div class="flex items-center overflow-x-auto py-2 gap-2 scrollbar-hide">
          <a href="sede-dashboard.html" class="flex items-center gap-2 rounded-lg  bg-brand-50 px-3 py-2 text-sm font-semibold text-brand-700 border-b-2 border-brand-600 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0h6"/></svg><span>Dashboard</span></a>
          <a href="sede-consultorios.html" aria-current="page" class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg><span>Consultorios</span></a>
          <a href="sede-usuarios.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span>Usuarios</span></a>
          <a href="sede-medicos.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M4 7a4 4 0 118 0 4 4 0 01-8 0zm12 4h4m-2-2v4m-6 4a6 6 0 10-12 0"/></svg><span>Médicos</span></a>
          <a href="sede-especialidades.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 6a3 3 0 10-6 0v5a3 3 0 106 0V9m0 2a4 4 0 104 4h1a3 3 0 003-3V6"/></svg>
            <span>Especialidades</span>
          </a>
          <!-- Icono Servicios (capas) -->
          <a href="sede-servicios.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7l9-4 9 4-9 4-9-4zm0 5l9 4 9-4m-18 5l9 4 9-4"/></svg>
            <span>Servicios</span>
          </a>
          <!-- Icono Horarios (reloj) -->
          <a href="sede-horarios.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z"/></svg>
            <span>Horarios</span>
          </a>
		</div>
        <!-- Acciones rápidas a la derecha -->
        <div class="flex items-center gap-2">
          <a href="agenda.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3M3 11h18M5 19h14a2 2 0 002-2v-6H3v6a2 2 0 002 2z"/></svg><span>Agenda</span></a>
          <a href="reserva.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6"/></svg><span>Reservas</span></a>
          <a href="atencion.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/></svg><span>Atenciones</span></a>
          <a href="reporte.html" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-5 w-5 text-brand-600"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5z"/><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 14l6.16-3.422A12.083 12.083 0 016 8.577M12 14v7"/></svg><span>Reportes</span></a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main -->
  <main class="pt-36 pb-24">
    <div class="mx-auto max-w-screen-2xl px-6">
      <!-- Encabezado -->
      <div class="mb-6 flex flex-wrap items-center justify-between gap-3">
        <div>
          <h1 class="text-2xl font-semibold tracking-tight text-slate-800">Dashboard • Sede Miraflores</h1>
          <p class="text-sm text-slate-500">Resumen operativo y clínico de hoy</p>
          <div class="mt-2 flex items-center gap-2">
            <span class="inline-flex h-2 w-2 rounded-full bg-emerald-500"></span>
            <span class="text-xs text-emerald-600 font-medium">Operativa</span>
            <span class="text-xs text-slate-400">• Últ. actualización: <span id="lastUpdate">Hace 3 min</span></span>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button class="rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white shadow-soft hover:bg-brand-700">Nueva reserva</button>
          <button class="rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Exportar</button>
        </div>
      </div>

      <!-- KPIs de la sede -->
      <section class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <article class="rounded-2xl border border-slate-200 bg-white p-4 shadow-soft">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs uppercase tracking-wider text-slate-400">Citas de hoy</p>
              <h3 class="mt-1 text-2xl font-semibold">96</h3>
              <p class="text-xs text-slate-400">Miraflores</p>
            </div>
            <div class="rounded-xl bg-brand-600/10 p-3 text-brand-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-6 w-6"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3M3 11h18M5 19h14a2 2 0 002-2v-6H3v6a2 2 0 002 2z"/></svg>
            </div>
          </div>
        </article>
        <article class="rounded-2xl border border-slate-200 bg-white p-4 shadow-soft">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs uppercase tracking-wider text-slate-400">Ocupación</p>
              <h3 class="mt-1 text-2xl font-semibold">82%</h3>
              <p class="text-xs text-slate-400">Turnos agregados</p>
            </div>
            <div class="rounded-xl bg-brand-600/10 p-3 text-brand-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-6 w-6"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6"/></svg>
            </div>
          </div>
        </article>
        <article class="rounded-2xl border border-slate-200 bg-white p-4 shadow-soft">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs uppercase tracking-wider text-slate-400">No‑show</p>
              <h3 class="mt-1 text-2xl font-semibold">3.2%</h3>
              <p class="text-xs text-slate-400">Hoy</p>
            </div>
            <div class="rounded-xl bg-brand-600/10 p-3 text-brand-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-6 w-6"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M22 12h-4l-3 7L9 5l-3 7H2"/></svg>
            </div>
          </div>
        </article>
        <article class="rounded-2xl border border-slate-200 bg-white p-4 shadow-soft">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs uppercase tracking-wider text-slate-400">Satisfacción</p>
              <h3 class="mt-1 text-2xl font-semibold">4.7/5</h3>
              <p class="text-xs text-slate-400">Encuestas del mes</p>
            </div>
            <div class="rounded-xl bg-brand-600/10 p-3 text-brand-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-6 w-6"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M12 17.75L5.5 21l1.25-7.25L2 8.75l7.25-1.05L12 1.75l2.75 5.95L22 8.75l-4.75 5.99L18.5 21 12 17.75z"/></svg>
            </div>
          </div>
        </article>
      </section>

      <!-- Paneles listados -->
      <section class="mt-6 grid gap-6 lg:grid-cols-3">
        <!-- Próximas reservas (Sede) -->
        <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-soft lg:col-span-2">
          <div class="mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Próximas reservas en la sede</h2>
            <a href="#" class="text-sm font-medium text-brand-700 hover:underline">Ver todo</a>
          </div>
          <ul class="divide-y divide-slate-100">
            <li class="flex items-center justify-between py-3">
              <div class="space-y-0.5">
                <p class="text-sm font-medium">María López</p>
                <p class="text-xs text-slate-500">Dr. Pérez • Cardiología • Consultorio 101 • 10:30</p>
              </div>
              <span class="rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700">Confirmada</span>
            </li>
            <li class="flex items-center justify-between py-3">
              <div class="space-y-0.5">
                <p class="text-sm font-medium">Juan Díaz</p>
                <p class="text-xs text-slate-500">Dra. Rivera • Dermatología • Consultorio 203 • 11:00</p>
              </div>
              <span class="rounded-full bg-amber-50 px-3 py-1 text-xs font-medium text-amber-700">Pendiente</span>
            </li>
            <li class="flex items-center justify-between py-3">
              <div class="space-y-0.5">
                <p class="text-sm font-medium">Ana Torres</p>
                <p class="text-xs text-slate-500">Dr. Salas • Pediatría • Consultorio 105 • 14:00</p>
              </div>
              <span class="rounded-full bg-sky-50 px-3 py-1 text-xs font-medium text-sky-700">Reprogramada</span>
            </li>
          </ul>
        </div>

        <!-- Indicadores rápidos -->
        <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Indicadores rápidos</h2>
            <button id="refresh" class="text-sm font-medium text-slate-500 hover:text-slate-700">Actualizar</button>
          </div>
          <div class="space-y-4">
            <div>
              <div class="flex items-center justify-between text-sm">
                <span>Consultorios operativos</span><span class="font-medium">12/14</span>
              </div>
              <div class="mt-1 h-2 w-full overflow-hidden rounded-full bg-slate-100">
                <div class="h-full w-[86%] rounded-full bg-gradient-to-r from-brand-600 to-accent-500"></div>
              </div>
            </div>
            <div>
              <div class="flex items-center justify-between text-sm">
                <span>Médicos en turno (ahora)</span><span class="font-medium">18</span>
              </div>
              <div class="mt-1 h-2 w-full overflow-hidden rounded-full bg-slate-100">
                <div class="h-full w-[72%] rounded-full bg-gradient-to-r from-brand-600 to-accent-500"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Gráficos sede -->
      <section class="mt-6 grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3" aria-label="Análisis de la sede">
        <article class="rounded-2xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="mb-3 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Citas por especialidad (hoy)</h2>
            <span class="text-xs text-slate-500">Top 5</span>
          </div>
          <div class="chart-container"><canvas id="chEspecialidadPie" aria-label="Distribución de citas por especialidad"></canvas></div>
        </article>
        <article class="rounded-2xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="mb-3 flex items-center justify-between">
            <h2 class="text-lg font-semibold">No‑show por especialidad (semana)</h2>
            <span class="text-xs text-slate-500">%</span>
          </div>
          <div class="chart-container"><canvas id="chNoShowBar" aria-label="No‑show por especialidad"></canvas></div>
        </article>
        <article class="rounded-2xl border border-slate-200 bg-white p-5 shadow-soft md:col-span-2 xl:col-span-1">
          <div class="mb-3 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Ocupación por consultorio (hoy)</h2>
            <span class="text-xs text-slate-500">% promedio</span>
          </div>
          <div class="chart-container"><canvas id="chOcupConsultorio" aria-label="Ocupación por consultorio"></canvas></div>
        </article>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="fixed bottom-0 inset-x-0 z-40 border-t border-slate-200 bg-white/90 backdrop-blur">
    <div class="mx-auto flex h-12 max-w-screen-2xl items-center justify-between px-6 text-sm text-slate-600">
      <p>© <span id="y"></span> NextIaCorp • Sede Miraflores</p>
      <nav class="hidden gap-4 md:flex">
        <a class="hover:text-slate-900" href="#">Privacidad</a>
        <a class="hover:text-slate-900" href="#">Términos</a>
        <a class="hover:text-slate-900" href="#">Contacto</a>
      </nav>
    </div>
  </footer>

  <script>
    // Año
    document.getElementById('y').textContent = new Date().getFullYear();

    // Chart defaults
    window.addEventListener('load', () => {
      if (!window.Chart) return;
      Chart.defaults.font.family = "ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      Chart.defaults.color = '#334155';
      Chart.defaults.borderColor = '#e2e8f0';
      Chart.defaults.responsive = true;
      Chart.defaults.maintainAspectRatio = false;
      const COLORS = { brand:'#4f46e5', accent:'#06b6d4' };

      // Pie: especialidades
      const elPie = document.getElementById('chEspecialidadPie');
      if (elPie) new Chart(elPie.getContext('2d'), {
        type:'doughnut',
        data:{
          labels:['Cardiología','Dermatología','Pediatría','Ginecología','Oftalmología'],
          datasets:[{ data:[28,22,20,18,12], backgroundColor:[COLORS.brand,COLORS.accent,'#10b981','#f59e0b','#ef4444'], borderWidth:1, borderColor:'#fff' }]
        },
        options:{ plugins:{ legend:{ position:'bottom' } }, cutout:'62%' }
      });

      // Bar horizontal: no-show
      const elNoShow = document.getElementById('chNoShowBar');
      if (elNoShow) new Chart(elNoShow.getContext('2d'), {
        type:'bar',
        data:{ labels:['Cardio','Derma','Pediatría','Gineco','Oftalmo'], datasets:[{ label:'% No‑show', data:[2.1,3.6,4.2,2.8,3.0], backgroundColor:COLORS.accent, borderRadius:8, maxBarThickness:22 }]},
        options:{ indexAxis:'y', plugins:{ legend:{ display:false } }, scales:{ x:{ beginAtZero:true, ticks:{ callback:v=>v+'%' } }, y:{ grid:{ display:false } } } }
      });

      // Bar: ocupación por consultorio
      const elOcup = document.getElementById('chOcupConsultorio');
      if (elOcup) new Chart(elOcup.getContext('2d'), {
        type:'bar',
        data:{ labels:['101','102','201','202','203','301'], datasets:[{ label:'% Ocupación', data:[88,76,81,79,84,72], backgroundColor:COLORS.brand, borderRadius:6, maxBarThickness:28 }]},
        options:{ plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true, ticks:{ callback:v=>v+'%' } } } }
      });

      // Botón actualizar (demo)
      const btn = document.getElementById('refresh');
      const last = document.getElementById('lastUpdate');
      if (btn && last) btn.addEventListener('click', () => { last.textContent = 'Hace 1 min'; });
    });
  </script>
</body>
</html>